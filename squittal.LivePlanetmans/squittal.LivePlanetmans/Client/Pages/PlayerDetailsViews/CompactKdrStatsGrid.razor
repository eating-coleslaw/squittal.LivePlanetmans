@using squittal.LivePlanetmans.Shared.Models

<div class="stat-ratio-grid @_gridClass"> @*style="display: grid; grid-template-columns: 1fr 1.75rem 1.75rem; grid-template-rows: 1rem; grid-template-areas: 'kdr kills deaths'; color: inherit; opacity: @_gridOpacity; font-weight: @_fontWeight;">*@
    @if (deathEventAggregate != null)
    {
        <div class="ratio"> @*style="grid-area: kdr; text-align: right; font-size: 1rem; font-size: 0.9rem;">*@
            @deathEventAggregate.KillDeathRatio
        </div>
        <div class="fraction-piece numerator"> @*style="grid-area: kills; text-align: right; font-size: 0.9rem; padding-left: 0.5rem;">*@
            <sup>@deathEventAggregate.Kills</sup>
        </div>
        <div class="fraction-piece denominator"> @*style="grid-area: deaths; text-align: right; font-size: 0.9rem; padding-left: 0.5rem;">*@
             <sub>@deathEventAggregate.Deaths</sub>
        </div>
    }
</div>

@code {
    [Parameter]
    public DeathEventAggregate deathEventAggregate { get; set; }

    private string _gridClass;

    private string _gridClassDefault = "default";
    private string _gridClassDimmed = "dimmed";

    /*
    private double _gridOpacity = 1.0;
    private double _dimmedGridOpacity = 0.5;

    private int _fontWeight = 400;
    private int _dimmedFontWeight = 300;
    */

    protected override void OnInitialized()
    {
        _gridClass = _gridClassDefault;
    }

    protected override void OnParametersSet()
    {
        if (deathEventAggregate != null && deathEventAggregate.Kills == 0 && deathEventAggregate.Deaths == 0)
        {
            _gridClass = _gridClassDimmed;
            //_gridOpacity = _dimmedGridOpacity;
            //_fontWeight = _dimmedFontWeight;
        }
        else
        {
            _gridClass = _gridClassDefault;
            //_gridOpacity = 1.0;
            //_fontWeight = 400;
        }
    }
}
